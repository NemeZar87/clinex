{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block css_base %}
    <link rel="stylesheet" href="{% static 'principal/base.css' %}">
    {% endblock %}
    {% block css_secundario %}
    <!-- <link rel="stylesheet" href="{% static 'principal/principal.css' %}"> -->
    {% endblock %}    
    {% block titulo %}
    <title>Clinex</title>
    {% endblock %}

<script>
    if (localStorage.getItem('modo') === 'oscuro') {
        document.documentElement.classList.add('modo_oscuro');
    }
</script>

</head>
<body>
    <div class="header">
        {% block header %}
        <header>
            <div>
                <h1>Clinex</h1>
            </div>
            <div>
                <p class="slogan_contenedor">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
            </div>
        </header>
        {% endblock %}

        {% block errores %}
        <div class="errores">
            {% if error %}
            <p>{{ error }}</p>
            {% endif %}
            {% for field, errors in form.errors.items %}
                <p><strong>{{ field }}</strong>:
                    {% for error in errors %}
                        {{ error }}
                    {% endfor %}
                </p>
            {% endfor %}
        </div>
        {% endblock %}
        {% block nav%}
        <nav class="nav_contenedor">
            <a href="javascript:void(0);" class="toggle-button" id="toggleButton">
            <span></span>
            <span></span>
            <span></span>
            </a>
            <div class="nav-links" id="navBarLinks">

                <ul class="ul_contenedor">
                    <li><a href="{% url 'principal:index' %}">Inicio</a></li>
                    <li><a href="{% url 'cuenta:servicios' %}">Servicios</a></li>
                    <li><a href="{% url 'cuenta:contacto' %}">Contacto</a></li>
                    
                    {% if user.is_authenticated %}
                    <li class="menu">
                        <!-- El nombre del usuario actúa como botón -->
                        <a id="perfil" href="{% url 'cuenta:config_perfil' %}">{{ user.get_full_name }}</a>
                        
                        <!-- Contenedor del menú desplegable -->
                        <ul class="menu-content">
                            <li><a href="{% url 'cuenta:config_perfil' %}">Perfil</a></li>
                            <li><a href="{% url 'cuenta:cerrar_sesion' %}">Cerrar Sesion</a></li>
                        </ul>
                    </li>
                    {% else %}
                    <li><a href="{% url 'cuenta:registro' %}">Registrarse</a></li>
                    <li><a href="{% url 'cuenta:inicio-sesion' %}">Inicio sesion</a></li>
                    {% endif %}
                </ul>
            </div>
        </nav>
        {% endblock %}
    </div>
    <div class="out_header">
        {% block main %}
        {% endblock %}

        {% block js %}
        <script>
        document.addEventListener('DOMContentLoaded', () => {
        const boton = document.getElementById('cambio_de_modo');
        if (!boton) return;

        const html = document.documentElement;
        if (localStorage.getItem('modo') === 'oscuro') html.classList.add('modo_oscuro');

        boton.addEventListener('click', () => {
            const oscuro = html.classList.toggle('modo_oscuro');
            localStorage.setItem('modo', oscuro ? 'oscuro' : 'claro');
        });
        });
        </script>
        <script src="{% static 'principal/navbar.js' %} "></script>
        {% endblock %}

        {% block js_secundario %}
        {% endblock %}

        {% block div %}
        {% endblock %}

        {% block form %}
        {% endblock %}

        {% block footer%}
        <!-- <footer>
            <small>derechos reservados</small>
        </footer> -->
        {% endblock %}
    </div>
</body>
</html>